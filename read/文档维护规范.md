# ThinkingHelp 文档维护规范

## 1. 目的
确保项目在迭代过程中，代码、测试、上线材料保持同步，避免“代码变了但文档没变”。

## 2. 适用范围
- 后端功能改动
- 前端功能改动
- 数据库结构改动
- AI 模型/Key/提示词策略改动
- 安全、合规、部署流程改动

## 3. 大改定义（必须更新文档）
满足任一条件即视为“大改”：
- 新增或下线一个用户可见功能
- 变更接口入参/出参或业务规则
- 新增数据库表/字段/索引，或数据迁移脚本
- 调整 AI 供应商、模型、调用链路、费用控制策略
- 影响上线流程、监控告警、权限控制、安全策略

## 4. 每次大改的文档更新清单（必做）
1. 更新 `read/主体功能开发路线图.md`：
- 调整阶段状态、优先级、依赖关系。
2. 更新 `read/功能任务清单.md`：
- 增加/删除任务项，标记是否完成。
3. 更新对应测试文档：
- 新功能新增测试用例，改动功能补充回归点。
4. 更新 `read/项目变更日志.md`：
- 记录时间、改动范围、影响、验证、回滚要点。
5. 如涉及上线策略，更新 `read/商用上线正式使用手册.md`。

## 5. 执行时机
- 开发开始前：先在任务或路线图中登记计划项。
- 提交代码后：同步变更日志与测试文档。
- 合并/发布前：检查文档是否齐全，不齐全不得发布。

## 6. 责任分工
- 开发负责人：更新任务、路线图、变更日志。
- 测试负责人：更新/执行测试用例并记录结果。
- 发布负责人：核对上线手册与变更日志一致性。

## 7. 变更日志记录规范
每条记录必须包含：
- 变更编号（如 `TH-2026-02-001`）
- 日期
- 负责人
- 变更类型（功能/修复/安全/性能/文档）
- 影响范围（前端/后端/数据库/AI/部署）
- 详细说明
- 是否需要执行 SQL/配置变更
- 验证结果
- 回滚方案

## 8. 发布门禁（文档维度）
以下任一项缺失，禁止进入发布：
- 变更日志未登记
- 测试用例与测试结果未更新
- 影响上线的改动未同步到上线手册

## 9. 文档编号管理（强制）
- 所有项目文档必须在 `read/文档编号总览.md` 登记编号后再投入使用。
- 新增文档流程：
1. 在编号总览中分配新编号（按类别递增）。
2. 在新文档开头增加编号信息（建议写法：`文档编号：XXX-YYY`）。
3. 在 `read/项目变更日志.md` 登记本次新增文档动作。
- 文档引用规范：
  - 评审、提测、发布时优先使用“编号 + 文档名”进行指代，避免重名或版本歧义。
