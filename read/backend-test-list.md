# 后端接口测试列表 - 测试结果

> 测试时间: 2026-01-23 17:28
> 测试环境: 本地开发环境 (localhost:8080)
> 测试账号: 1000000 / admin123

## 1. 认证与鉴权
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `POST /api/auth/login` | ✅ **通过** | 成功获取 Token |
| `POST /api/auth/register` | ⚪ **跳过** | 未测试 |
| 鉴权拦截 | ✅ **通过** | 无 Token 访问返回 401 |

## 2. 健康档案
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `GET /api/health/profile` | ✅ **通过** | 能返回 null 或对象 |
| `POST /api/health/profile` | ❌ **失败** | 接口返回 500 或数据库写入异常 (需检查 `health_profile` 表结构) |
| 保存后再获取 | ❌ **失败** | 因保存失败，获取到的数据未更新 |

## 3. 健康记录(综合)
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `POST /api/health/records` | ✅ **通过** | 数据写入成功 |
| `GET /api/health/records` | ✅ **通过** | 列表查询正常，排序正确 |
| `GET /api/health/records/latest` | ✅ **通过** | 能获取最新一条数据 |

## 4. 饮食记录
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `POST /api/diet/logs` | ❌ **失败** | 接口调用失败，疑似 `diet_log` 表结构缺失或字段不匹配 |
| `GET /api/diet/logs` | ❌ **失败** | 获取列表失败 |

## 5. AI 对话
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `POST /api/chat/ask` | ✅ **通过** | 普通文本问答正常响应 |
| `POST /api/chat/stream` | ⚠️ **未验证** | 脚本测试超时，建议手动测试 |

## 6. 食谱中心
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `GET /api/meal-plan/weekly` | ⚠️ **超时** | AI 生成耗时较长，测试脚本超时 (Timeout) |
| `GET /api/export/pdf` | ⚪ **跳过** | 需浏览器环境验证 |

## 7. 用户设置
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `GET /api/user/settings` | ✅ **通过** | 获取默认配置成功 |
| `PUT /api/user/settings` | ✅ **通过** | 更新成功 |

## 8. 管理员接口
| 接口 | 结果 | 备注 |
| :--- | :--- | :--- |
| `GET /api/admin/users` | ✅ **通过** | 管理员权限校验通过，返回列表 |

---

## 结论与建议
1.  **数据库表结构问题**: 请检查数据库中是否存在 `health_profile` 和 `diet_log` 表，且字段与实体类一致。目前的失败极有可能是数据库缺表或缺字段导致的。
2.  **AI 接口超时**: `meal-plan` 接口响应时间过长，建议增加异步处理机制或前端增加 Loading 提示。
